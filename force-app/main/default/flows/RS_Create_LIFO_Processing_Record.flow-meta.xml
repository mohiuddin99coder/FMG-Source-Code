<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>LIFO_Processing_Assignment</name>
        <label>LIFO Processing Assignment</label>
        <locationX>176</locationX>
        <locationY>431</locationY>
        <assignmentItems>
            <assignToReference>LIFOProcessingID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Create_LIFO_Processing_Record_Ready</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_LIFO_PE</targetReference>
        </connector>
    </assignments>
    <description>Creates the RS LIFO Process Record and also the LIFO Platform Event- All items. 
Updated to include RMADISP/INSPTOSCRAP</description>
    <environments>Default</environments>
    <formulas>
        <name>Body</name>
        <dataType>String</dataType>
        <expression>&quot;RECEIPT NUMBER:  &quot; &amp;TEXT( {!$Record.rstk__sytxncst_porcptno__c}) &amp; BR() &amp;
&quot;Transaction Type:  &quot; &amp; {!$Record.rstk__sytxncst_txnid__c} &amp; BR() &amp;
&quot;QTY: &quot; &amp;  TEXT({!$Record.rstk__sytxncst_txnqty__c}) &amp; BR() &amp;
&quot;TRANSACTION ID: &quot; &amp; {!$Record.Id}</expression>
    </formulas>
    <interviewLabel>RS Create LIFO Processing Record {!$Flow.CurrentDateTime}</interviewLabel>
    <label>RS Create LIFO Processing Record</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_LIFO_PE</name>
        <label>Create LIFO PE</label>
        <locationX>176</locationX>
        <locationY>539</locationY>
        <inputAssignments>
            <field>LIFO_Processing_ID__c</field>
            <value>
                <elementReference>LIFOProcessingID</elementReference>
            </value>
        </inputAssignments>
        <object>LIFO_Processing_Record_PE__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <description>Creates the LIFO Update PE</description>
        <name>Create_LIFO_Processing_Record_Ready</name>
        <label>Create LIFO Processing Record-Ready</label>
        <locationX>176</locationX>
        <locationY>323</locationY>
        <connector>
            <targetReference>LIFO_Processing_Assignment</targetReference>
        </connector>
        <inputAssignments>
            <field>Division_Master__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_div__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FIFO_Layer_Reference__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_fifoseq__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Inventory_Item_Master__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_icitem__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RCPT_NUMBER__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_porcptno__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Rootstock_Cost_Transaction__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TOTAL_COST__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_ucsttotext__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TXN_QTY__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_txnqty__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TXN_SUB_TYPE__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_txnsubid__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TXN_TYPE__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_txnid__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>UNIT_COST__c</field>
            <value>
                <elementReference>$Record.rstk__sytxncst_ucsttot__c</elementReference>
            </value>
        </inputAssignments>
        <object>LIFO_Processing_Record__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <start>
        <locationX>50</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Create_LIFO_Processing_Record_Ready</targetReference>
        </connector>
        <filterLogic>(1 OR 2 OR 3 OR 4 OR (5 AND 6) OR 8 OR 9 OR(10 AND 11 AND 12)) AND 7</filterLogic>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>WOISS</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SOISS</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PORCPTR TO INV</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>INVLOCSCRP</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>INVLOCADJ</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_locqtyupdind__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>D</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_fifoind__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>INVDOLADJ</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>POISS</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>RMADISP</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_txnsubid__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>INSPTOSCRAP</stringValue>
            </value>
        </filters>
        <filters>
            <field>rstk__sytxncst_acctind__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>rstk__sytxncst__c</object>
        <recordTriggerType>Create</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Draft</status>
    <variables>
        <name>LIFOProcessingID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>nbrUnprocessedLIFO</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>NotificationBody</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NotificationSubject</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NotificationType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NotificationTypeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NotificationUsers</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
